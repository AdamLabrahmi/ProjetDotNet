@model ProjetDotNet.Models.ViewModels.ProfileViewModel
@{
    ViewBag.Title = "Modifier mon profil";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<div class="max-w-3xl mx-auto space-y-6">
    <h1 class="text-2xl font-bold">Modifier mon profil</h1>

    @if (TempData["Message"] != null)
    {
        <div class="p-3 bg-green-100 text-green-800 rounded">@TempData["Message"]</div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="p-3 bg-red-100 text-red-800 rounded">@TempData["Error"]</div>
    }

    <form asp-action="Edit" method="post" enctype="multipart/form-data" class="bg-white p-6 rounded shadow space-y-4">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="UserID" />

        <div>
            <label class="block text-sm font-medium text-gray-700">Nom</label>
            <input asp-for="Nom" class="w-full px-3 py-2 border rounded" />
            <span asp-validation-for="Nom" class="text-red-600 text-sm"></span>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Email (non modifiable)</label>
            <input asp-for="Email" class="w-full px-3 py-2 border rounded bg-gray-100" readonly />
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Téléphone</label>
            <input asp-for="Telephone" class="w-full px-3 py-2 border rounded" />
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Avatar (URL)</label>
            <input asp-for="Avatar" class="w-full px-3 py-2 border rounded" />
        </div>

        <div class="flex gap-2">
            <button type="submit" class="bg-teal-600 text-white px-4 py-2 rounded">Enregistrer</button>
            <a asp-action="Index" class="px-4 py-2 border rounded text-gray-700">Annuler</a>
        </div>
    </form>

    <!-- Changer le mot de passe -->
    <div class="bg-white p-6 rounded shadow">
        <h2 class="text-lg font-semibold mb-3">Changer le mot de passe</h2>

        <form asp-action="ChangePassword" method="post" class="space-y-3">
            @Html.AntiForgeryToken()
            <div>
                <label class="block text-sm font-medium text-gray-700">Mot de passe actuel</label>
                <input name="currentPassword" type="password" class="w-full px-3 py-2 border rounded" required />
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Nouveau mot de passe</label>
                <input name="newPassword" type="password" class="w-full px-3 py-2 border rounded" required />
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Confirmer nouveau mot de passe</label>
                <input name="confirmPassword" type="password" class="w-full px-3 py-2 border rounded" required />
            </div>

            <div class="flex gap-2">
                <button type="submit" class="bg-amber-600 text-white px-4 py-2 rounded">Changer le mot de passe</button>
                <a asp-action="Index" class="px-4 py-2 border rounded text-gray-700">Retour</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}